{"ast":null,"code":"import { mapState } from 'pinia';\nimport { VTextField, VSwitch, VBtn } from 'vuetify/components';\nimport { usePlaylistStore } from '../store/playlist';\nimport { useSettingStore } from '../store/settings';\nimport { videoIdParser } from '../utility/video-id-parser';\nimport { fetchVideoInformation } from '../utility/youtube-video-validation';\nimport { YOUTUBE_API_CODES, PLAY_NOW } from '../constants/constants';\nimport { mappedController } from '../utility/video-controller';\nexport default {\n  components: {\n    VTextField,\n    VSwitch,\n    VBtn\n  },\n  emits: ['toggle-switch', 'mouseleave'],\n  data() {\n    return {\n      pauseSwitch: true,\n      key: 0,\n      userInput: ''\n    };\n  },\n  computed: {\n    ...mapState(useSettingStore, ['autopause']),\n    ...mapState(usePlaylistStore, ['currentPlaylist']),\n    hasInput() {\n      return this.userInput && this.userInput.replace(/\\s/g, '').length;\n    },\n    isCurrentPlaylistEmpty() {\n      return this.currentPlaylist.length === 0;\n    }\n  },\n  methods: {\n    async onPlayNow() {\n      if (!this.hasInput) {\n        console.warn('no input');\n        return;\n      }\n      const userInput = this.userInput;\n      this.userInput = '';\n      const payload = await this.processUserInput(userInput);\n      if (payload.status === YOUTUBE_API_CODES.VALID) {\n        mappedController[PLAY_NOW](payload);\n      }\n    },\n    async onQueueVideo() {\n      if (!this.hasInput) {\n        console.warn('no input');\n        return;\n      }\n      const userInput = this.userInput;\n      this.userInput = '';\n      const payload = await this.processUserInput(userInput);\n      if (payload.status === YOUTUBE_API_CODES.VALID) {\n        mappedController.queueSong(payload);\n      }\n    },\n    async fetchVideoInfo(videoId) {\n      const payload = await fetchVideoInformation(videoId);\n      return payload;\n    },\n    onPlayNext() {\n      const playStore = usePlaylistStore();\n      if (++this.key === playStore.currentPlaylist.length) this.key = 0;\n      playStore.changeCurrentSongInPlaylist(this.key);\n    },\n    onSyncPlaylist() {\n      const playStore = usePlaylistStore();\n      playStore.syncPlaylist();\n    },\n    async processUserInput(userInput) {\n      const videoId = videoIdParser(userInput);\n      if (!videoId) {\n        console.warn('improper videoId');\n        return null;\n      }\n      const payload = await this.fetchVideoInfo(videoId);\n      return payload;\n    }\n  },\n  watch: {\n    pauseSwitch() {\n      const playStore = useSettingStore();\n      playStore.toggleAutopause();\n    }\n  }\n};","map":{"version":3,"names":["mapState","VTextField","VSwitch","VBtn","usePlaylistStore","useSettingStore","videoIdParser","fetchVideoInformation","YOUTUBE_API_CODES","PLAY_NOW","mappedController","components","emits","data","pauseSwitch","key","userInput","computed","hasInput","replace","length","isCurrentPlaylistEmpty","currentPlaylist","methods","onPlayNow","console","warn","payload","processUserInput","status","VALID","onQueueVideo","queueSong","fetchVideoInfo","videoId","onPlayNext","playStore","changeCurrentSongInPlaylist","onSyncPlaylist","syncPlaylist","watch","toggleAutopause"],"sources":["X:\\Coding\\MyTube\\src\\components\\YoutubeController.vue"],"sourcesContent":["<template lang=\"pug\">\n.youtube-configurator\n  .input-container\n    v-text-field(v-model=\"userInput\"\n                 label='Enter a URL or video ID'\n                 @keyup.enter=\"onPlayNow\"\n                 variant='solo'\n                 hide-details=\"auto\").input-style\n    v-btn.add-style(@click=\"onQueueVideo\") Queue\n  v-switch(v-model=\"pauseSwitch\"\n           label='Pause on load'\n           color='red'\n           :class=\"{activated: pauseSwitch}\").switch-style\n  .butonic-plague\n    v-btn(@click=\"onSyncPlaylist\").btn-style Sync Playlist\n    v-btn(@click=\"onPlayNext\" :disabled=\"isCurrentPlaylistEmpty\").btn-style Play Next\n\n</template>\n\n<script>\nimport { mapState } from 'pinia'\nimport { VTextField, VSwitch, VBtn } from 'vuetify/components'\nimport { usePlaylistStore } from '../store/playlist'\nimport { useSettingStore } from '../store/settings'\nimport { videoIdParser } from '../utility/video-id-parser'\nimport { fetchVideoInformation } from '../utility/youtube-video-validation'\nimport { YOUTUBE_API_CODES, PLAY_NOW } from '../constants/constants'\n\nimport {mappedController} from '../utility/video-controller'\n\nexport default {\n  components: {\n    VTextField,\n    VSwitch,\n    VBtn\n  },\n  emits: ['toggle-switch', 'mouseleave'],\n  data() {\n    return {\n      pauseSwitch: true,\n      key: 0,\n      userInput: ''\n    }\n  },\n  computed: {\n    ...mapState(useSettingStore, ['autopause']),\n    ...mapState(usePlaylistStore, ['currentPlaylist']),\n    hasInput() {\n      return this.userInput && this.userInput.replace(/\\s/g, '').length\n    },\n    isCurrentPlaylistEmpty() {\n      return this.currentPlaylist.length === 0\n    }\n  },\n  methods: {\n    async onPlayNow() {\n      if (!this.hasInput) {\n        console.warn('no input')\n        return\n      }\n      const userInput = this.userInput\n      this.userInput = ''\n      const payload = await this.processUserInput(userInput)\n      if (payload.status === YOUTUBE_API_CODES.VALID) {\n        mappedController[PLAY_NOW](payload)\n      }\n    },\n    async onQueueVideo() {\n      if (!this.hasInput) {\n        console.warn('no input')\n        return\n      }\n      const userInput = this.userInput\n      this.userInput = ''\n      const payload = await this.processUserInput(userInput)\n      if (payload.status === YOUTUBE_API_CODES.VALID) {\n        mappedController.queueSong(payload)\n      }\n    },\n    async fetchVideoInfo(videoId) {\n      const payload = await fetchVideoInformation(videoId)\n      return payload\n    },\n    onPlayNext() {\n      const playStore = usePlaylistStore()\n      if (++this.key === playStore.currentPlaylist.length) this.key = 0\n      playStore.changeCurrentSongInPlaylist(this.key)\n    },\n    onSyncPlaylist() {\n      const playStore = usePlaylistStore()\n      playStore.syncPlaylist()\n    },\n    async processUserInput(userInput) {\n      const videoId = videoIdParser(userInput)\n      if (!videoId) {\n        console.warn('improper videoId');\n        return null\n      }\n      const payload = await this.fetchVideoInfo(videoId)\n      return payload\n    }\n  },\n  watch: {\n    pauseSwitch() {\n      const playStore = useSettingStore()\n      playStore.toggleAutopause()\n    }\n  }\n}\n</script>\n<style></style>\n<style lang=\"scss\" scoped>\n@import 'src/styles/flex';\n\n$input-height : 50px;\n\n.youtube-configurator {\n  @include flex-column();\n  justify-content: space-between;\n  padding: 25px;\n\n\n  .input-container {\n    @include flex-row();\n    box-sizing: border-box;\n    padding: 10px;\n\n    .input-style {\n      width: 350px;\n      margin: 0 5px;\n    }\n\n    .add-style {\n      height: $input-height;\n    }\n  }\n\n  .btn-style {\n    margin-bottom: 10px;\n  }\n\n  .activated {\n    color: red;\n  }\n\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}