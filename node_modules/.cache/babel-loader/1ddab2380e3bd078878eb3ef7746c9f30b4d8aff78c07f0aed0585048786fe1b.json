{"ast":null,"code":"import { mapState } from 'pinia';\nimport { loadYouTubeAPI } from '../utility/youtube';\nimport { useSettingStore } from '../store/settings';\nexport default {\n  name: 'YoutubeVideo',\n  data() {\n    return {\n      date: new Date(),\n      player: null\n    };\n  },\n  computed: {\n    ...mapState(useSettingStore, ['autopause'])\n  },\n  props: {\n    playerOptions: {\n      type: Object,\n      default: () => {}\n    },\n    videoId: {\n      type: String,\n      default: '7aMOurgDB-o'\n    }\n  },\n  mounted() {\n    this.loadYoutubePlayer();\n  },\n  methods: {\n    onYoutubeAPIReady() {\n      console.log(this.videoId);\n      const playerOptions = {\n        height: '500px',\n        width: '500px',\n        videoId: this.videoId,\n        playerVars: {\n          'controls': 1,\n          'rel': 0,\n          'autoplay': 0\n        },\n        events: {\n          'onReady': this.onPlayerReady,\n          'onStateChange': this.onPlayerStateChange\n        }\n      };\n      this.player = new YT.Player('player', playerOptions);\n      if (this.autopause) {\n        this.player.stopVideo();\n      }\n    },\n    onPlayerStateChange(event) {\n      if (event.data === 0) {\n        // play next video here\n        console.warn('Video Ended');\n      }\n      console.log('statatatat');\n      this.loadYoutubePlayer();\n    },\n    onVideoIdChange() {\n      if (!this.player) {\n        this.loadYoutubePlayer();\n      } else {\n        this.player.loadVideoById(this.videoId);\n      }\n    },\n    loadYoutubePlayer() {\n      loadYouTubeAPI();\n      window.onYouTubeIframeAPIReady = () => {\n        this.onYoutubeAPIReady();\n      };\n    }\n  },\n  watch: {\n    player() {\n      // Youtube gets rekted on hot reloads\n      this.loadYoutubePlayer();\n    },\n    videoId() {\n      this.onVideoIdChange();\n    }\n  }\n};","map":{"version":3,"names":["mapState","loadYouTubeAPI","useSettingStore","name","data","date","Date","player","computed","props","playerOptions","type","Object","default","videoId","String","mounted","loadYoutubePlayer","methods","onYoutubeAPIReady","console","log","height","width","playerVars","events","onPlayerReady","onPlayerStateChange","YT","Player","autopause","stopVideo","event","warn","onVideoIdChange","loadVideoById","window","onYouTubeIframeAPIReady","watch"],"sources":["X:\\Coding\\MyTube\\src\\components\\YoutubeVideo.vue"],"sourcesContent":["<template lang=\"pug\">\n.youtube-player(tabindex=\"-1\")\n\t#player(tabindex=\"-1\")\n</template>\n\n<script>\nimport { mapState } from 'pinia'\nimport { loadYouTubeAPI } from '../utility/youtube'\nimport { useSettingStore } from '../store/settings'\n\nexport default {\n\tname: 'YoutubeVideo',\n\tdata() {\n\t\treturn {\n\t\t\tdate: new Date(),\n\t\t\tplayer: null\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState(useSettingStore, ['autopause'])\n\t},\n\tprops: {\n\t\tplayerOptions: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => { }\n\t\t},\n\t\tvideoId: {\n\t\t\ttype: String,\n\t\t\tdefault: '7aMOurgDB-o'\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.loadYoutubePlayer()\n\t},\n\tmethods: {\n\t\tonYoutubeAPIReady() {\n\t\t\tconsole.log(this.videoId)\n\t\t\tconst playerOptions = {\n\t\t\t\theight: '500px',\n\t\t\t\twidth: '500px',\n\t\t\t\tvideoId: this.videoId,\n\t\t\t\tplayerVars: {\n\t\t\t\t\t'controls': 1,\n\t\t\t\t\t'rel': 0,\n\t\t\t\t\t'autoplay': 0\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'onReady': this.onPlayerReady,\n\t\t\t\t\t'onStateChange': this.onPlayerStateChange\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.player = new YT.Player('player', playerOptions)\n\t\t\tif (this.autopause) {\n\t\t\t\t\tthis.player.stopVideo()\n\t\t\t}\n\t\t},\n\t\tonPlayerStateChange(event) {\n\t\t\tif(event.data === 0) {\n\t\t\t\t// play next video here\n\t\t\t\tconsole.warn('Video Ended')\n\t\t\t}\n\t\t\tconsole.log('statatatat');\n\t\t\tthis.loadYoutubePlayer()\n\n\n\t\t},\n\t\tonVideoIdChange() {\n\t\t\tif (!this.player) {\n\t\t\t\tthis.loadYoutubePlayer()\n\t\t\t} else {\n\t\t\t\tthis.player.loadVideoById(this.videoId)\n\n\t\t\t}\n\t\t},\n\t\tloadYoutubePlayer() {\n\t\t\tloadYouTubeAPI()\n\t\t\t\twindow.onYouTubeIframeAPIReady = () => {\n\t\t\t\tthis.onYoutubeAPIReady()\n\t\t\t}\n\t\t}\n\t},\n\twatch: {\n\t\tplayer() {\n\t\t\t// Youtube gets rekted on hot reloads\n\t\t\tthis.loadYoutubePlayer()\n\t\t},\n\t\tvideoId() {\n\t\t\tthis.onVideoIdChange()\n\t\t}\n\t}\n}\n</script>\n<style scoped lang=\"scss\">\n@import 'src/styles/flex';\n\n.youtube-player {\n\t@include flex-center();\n\n\t.info {\n\t\t@include flex-column();\n\t\tcolor: white;\n\t}\n}\n</style>\n"],"mappings":"AAMA,SAASA,QAAO,QAAS,OAAM;AAC/B,SAASC,cAAa,QAAS,oBAAmB;AAClD,SAASC,eAAc,QAAS,mBAAkB;AAElD,eAAe;EACdC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACN,OAAO;MACNC,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC;MAChBC,MAAM,EAAE;IACT;EACD,CAAC;EACDC,QAAQ,EAAE;IACT,GAAGR,QAAQ,CAACE,eAAe,EAAE,CAAC,WAAW,CAAC;EAC3C,CAAC;EACDO,KAAK,EAAE;IACNC,aAAa,EAAE;MACdC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAEA,CAAA,KAAM,CAAE;IAClB,CAAC;IACDC,OAAO,EAAE;MACRH,IAAI,EAAEI,MAAM;MACZF,OAAO,EAAE;IACV;EACD,CAAC;EACDG,OAAOA,CAAA,EAAG;IACT,IAAI,CAACC,iBAAiB,CAAC;EACxB,CAAC;EACDC,OAAO,EAAE;IACRC,iBAAiBA,CAAA,EAAG;MACnBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACP,OAAO;MACxB,MAAMJ,aAAY,GAAI;QACrBY,MAAM,EAAE,OAAO;QACfC,KAAK,EAAE,OAAO;QACdT,OAAO,EAAE,IAAI,CAACA,OAAO;QACrBU,UAAU,EAAE;UACX,UAAU,EAAE,CAAC;UACb,KAAK,EAAE,CAAC;UACR,UAAU,EAAE;QACb,CAAC;QACDC,MAAM,EAAE;UACP,SAAS,EAAE,IAAI,CAACC,aAAa;UAC7B,eAAe,EAAE,IAAI,CAACC;QACvB;MACD;MAEA,IAAI,CAACpB,MAAK,GAAI,IAAIqB,EAAE,CAACC,MAAM,CAAC,QAAQ,EAAEnB,aAAa;MACnD,IAAI,IAAI,CAACoB,SAAS,EAAE;QAClB,IAAI,CAACvB,MAAM,CAACwB,SAAS,CAAC;MACxB;IACD,CAAC;IACDJ,mBAAmBA,CAACK,KAAK,EAAE;MAC1B,IAAGA,KAAK,CAAC5B,IAAG,KAAM,CAAC,EAAE;QACpB;QACAgB,OAAO,CAACa,IAAI,CAAC,aAAa;MAC3B;MACAb,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;MACzB,IAAI,CAACJ,iBAAiB,CAAC;IAGxB,CAAC;IACDiB,eAAeA,CAAA,EAAG;MACjB,IAAI,CAAC,IAAI,CAAC3B,MAAM,EAAE;QACjB,IAAI,CAACU,iBAAiB,CAAC;MACxB,OAAO;QACN,IAAI,CAACV,MAAM,CAAC4B,aAAa,CAAC,IAAI,CAACrB,OAAO;MAEvC;IACD,CAAC;IACDG,iBAAiBA,CAAA,EAAG;MACnBhB,cAAc,CAAC;MACdmC,MAAM,CAACC,uBAAsB,GAAI,MAAM;QACvC,IAAI,CAAClB,iBAAiB,CAAC;MACxB;IACD;EACD,CAAC;EACDmB,KAAK,EAAE;IACN/B,MAAMA,CAAA,EAAG;MACR;MACA,IAAI,CAACU,iBAAiB,CAAC;IACxB,CAAC;IACDH,OAAOA,CAAA,EAAG;MACT,IAAI,CAACoB,eAAe,CAAC;IACtB;EACD;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}