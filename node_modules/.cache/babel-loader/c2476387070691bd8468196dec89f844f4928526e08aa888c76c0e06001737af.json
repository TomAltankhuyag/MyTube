{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { START_SONG_INDEX } from \"../../constants/constants\";\nexport const actions = {\n  syncPlaylist(index = 0) {\n    if (this.playlists.length === 0) {\n      console.warn('no playlists ):');\n      return;\n    }\n    // Initialize both user and hidden playlist\n    this.currentPlaylist = [...this.playlists[index].playlist];\n    this.internalPlaylist = [...this.playlists[index].playlist];\n    if (!this.currentSong.videoId) {\n      const songIndex = getRandomInt(0, this.currentPlaylist.length);\n      this.changeCurrentSongInPlaylist(songIndex);\n    }\n  },\n  changeCurrentSongInPlaylist(index = START_SONG_INDEX) {\n    if (this.currentPlaylist.length === 0) {\n      console.warn('out of songs!');\n      return;\n    }\n    const song = this.currentPlaylist[index];\n    this.currentSong = song;\n  },\n  changeCurrentSongBySong(song) {\n    if (Object.keys(song).length === 0) {\n      console.warn('no song provided');\n    }\n    this.currentSong = song;\n  },\n  removeSongByVideoId(videoId) {\n    const song = this.internalPlaylist.find(song => song.videoId === videoId);\n    const index = this.internalPlaylist.indexOf(song);\n    // Index is returned as -1 if no matching song is found\n    if (index >= 0) {\n      this.internalPlaylist.splice(index, 1);\n    }\n  },\n  addSongToEnd(song) {\n    this.internalPlaylist.push(song);\n  },\n  addSongToFirst(song) {\n    this.internalPlaylist.unshift(song);\n  },\n  loadPlaylistWithPayload(payload) {\n    console.log(payload);\n    const newPlaylist = [];\n    payload.items.forEach(item => {\n      const video = {};\n      video.videoId = item.contentDetails.videoId;\n      video.name = item.snippet.title;\n      newPlaylist.push(video);\n    });\n    this.internalPlaylist = [...newPlaylist];\n    this.currentPlaylist = [...newPlaylist];\n  }\n};\n// min - Inclusive\n// max - Exclusive\nfunction getRandomInt(min = 0, max) {\n  if (!max) {\n    console.warn('max warning');\n  }\n  return Math.floor(Math.random() * (max - min) + min);\n}","map":{"version":3,"names":["START_SONG_INDEX","actions","syncPlaylist","index","playlists","length","console","warn","currentPlaylist","playlist","internalPlaylist","currentSong","videoId","songIndex","getRandomInt","changeCurrentSongInPlaylist","song","changeCurrentSongBySong","Object","keys","removeSongByVideoId","find","indexOf","splice","addSongToEnd","push","addSongToFirst","unshift","loadPlaylistWithPayload","payload","log","newPlaylist","items","forEach","item","video","contentDetails","name","snippet","title","min","max","Math","floor","random"],"sources":["X:/Coding/MyTube/src/store/playlist/actions.js"],"sourcesContent":["import { START_SONG_INDEX } from \"../../constants/constants\"\r\n\r\nexport const actions = {\r\n  syncPlaylist(index = 0) {\r\n    if (this.playlists.length === 0) {\r\n      console.warn('no playlists ):')\r\n      return\r\n    }\r\n    // Initialize both user and hidden playlist\r\n    this.currentPlaylist = [...this.playlists[index].playlist]\r\n    this.internalPlaylist = [...this.playlists[index].playlist]\r\n\r\n    if (!this.currentSong.videoId) {\r\n      const songIndex = getRandomInt(0, this.currentPlaylist.length)\r\n      this.changeCurrentSongInPlaylist(songIndex)\r\n    }\r\n  },\r\n  changeCurrentSongInPlaylist(index = START_SONG_INDEX) {\r\n    if (this.currentPlaylist.length === 0) {\r\n      console.warn('out of songs!')\r\n      return\r\n    }\r\n    const song = this.currentPlaylist[index]\r\n    this.currentSong = song\r\n  },\r\n  changeCurrentSongBySong(song) {\r\n    if (Object.keys(song).length === 0) {\r\n      console.warn('no song provided')\r\n    }\r\n    this.currentSong = song\r\n  },\r\n  removeSongByVideoId(videoId) {\r\n    const song = this.internalPlaylist.find(song => song.videoId === videoId)\r\n    const index = this.internalPlaylist.indexOf(song)\r\n    // Index is returned as -1 if no matching song is found\r\n    if (index >= 0) {\r\n      this.internalPlaylist.splice(index, 1)\r\n    }\r\n  },\r\n  addSongToEnd(song) {\r\n    this.internalPlaylist.push(song)\r\n  },\r\n  addSongToFirst(song) {\r\n    this.internalPlaylist.unshift(song)\r\n  },\r\n  loadPlaylistWithPayload(payload) {\r\n    console.log(payload)\r\n    const newPlaylist = []\r\n    payload.items.forEach((item) => {\r\n      const video = {}\r\n      video.videoId = item.contentDetails.videoId\r\n      video.name = item.snippet.title\r\n      newPlaylist.push(video)\r\n    })\r\n    this.internalPlaylist = [...newPlaylist]\r\n    this.currentPlaylist = [...newPlaylist]\r\n  }\r\n}\r\n// min - Inclusive\r\n// max - Exclusive\r\nfunction getRandomInt(min = 0, max) {\r\n  if (!max) {\r\n    console.warn('max warning')\r\n  }\r\n  return Math.floor(Math.random() * (max - min) + min)\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}