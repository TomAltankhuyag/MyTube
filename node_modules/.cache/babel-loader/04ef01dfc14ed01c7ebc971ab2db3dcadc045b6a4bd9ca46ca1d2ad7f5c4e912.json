{"ast":null,"code":"import { mapState } from 'pinia';\nimport { useSettingStore } from '../store/settings';\nexport default {\n  name: 'YoutubeVideo',\n  data() {\n    return {\n      player: null\n    };\n  },\n  computed: {\n    ...mapState(useSettingStore, ['autopause'])\n  },\n  props: {\n    videoId: {\n      type: String,\n      validator(prop) {\n        console.log(prop);\n        return prop || '7aMOurgDB-o';\n      },\n      required: true\n    }\n  },\n  mounted() {\n    this.loadYoutubePlayer();\n  },\n  methods: {\n    loadYouTubeAPI() {\n      const tag = document.createElement('script');\n      tag.src = \"https://www.youtube.com/iframe_api\";\n      const firstScriptTag = document.getElementsByTagName('script')[0];\n      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n    },\n    loadYoutubePlayer() {\n      if (!window.YT || !window.YT.loaded) {\n        console.log('loading youtube api');\n        this.loadYouTubeAPI();\n      }\n      window.onYouTubeIframeAPIReady = () => {\n        const playerOptions = {\n          height: '500px',\n          width: '500px',\n          videoId: this.videoId,\n          playerVars: {\n            'controls': 1,\n            'rel': 0,\n            'autoplay': this.autopause ? 0 : 1\n          },\n          events: {\n            'onReady': this.onPlayerReady,\n            'onStateChange': this.onPlayerStateChange\n          }\n        };\n        this.player = new YT.Player('player', playerOptions);\n      };\n    },\n    onPlayerReady() {\n      console.log('on player ready');\n    },\n    onStateChange() {\n      console.log('on state change');\n    },\n    onPlayerStateChange(event) {\n      console.log('state change');\n      if (event.data === 0) {\n        console.warn('Video Ended');\n      }\n    },\n    onApiChange() {\n      console.log('on api dogshit');\n    },\n    onVideoIdChange() {\n      console.log('broskie');\n      this.player.loadVideoById(this.videoId);\n    }\n  },\n  watch: {\n    player() {\n      console.log('player change');\n    },\n    videoId() {\n      console.log(this.videoId);\n      this.onVideoIdChange();\n    }\n  }\n};","map":{"version":3,"names":["mapState","useSettingStore","name","data","player","computed","props","videoId","type","String","validator","prop","console","log","required","mounted","loadYoutubePlayer","methods","loadYouTubeAPI","tag","document","createElement","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore","window","YT","loaded","onYouTubeIframeAPIReady","playerOptions","height","width","playerVars","autopause","events","onPlayerReady","onPlayerStateChange","Player","onStateChange","event","warn","onApiChange","onVideoIdChange","loadVideoById","watch"],"sources":["X:\\Coding\\MyTube\\src\\components\\YoutubeVideo.vue"],"sourcesContent":["<template lang=\"pug\">\n.youtube-player(tabindex=\"-1\")\n\t#player(tabindex=\"-1\")\n</template>\n\n<script>\nimport { mapState } from 'pinia'\nimport { useSettingStore } from '../store/settings'\n\nexport default {\n\tname: 'YoutubeVideo',\n\tdata() {\n\t\treturn {\n\t\t\tplayer: null\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapState(useSettingStore, ['autopause'])\n\t},\n\tprops: {\n\t\tvideoId: {\n\t\t\ttype: String,\n\t\t\tvalidator(prop) {\n\t\t\t\tconsole.log(prop);\n\t\t\t\treturn prop || '7aMOurgDB-o'\n\t\t\t},\n\t\t\trequired: true\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.loadYoutubePlayer()\n\t},\n\tmethods: {\n\t\tloadYouTubeAPI() {\n\t\t\tconst tag = document.createElement('script')\n\t\t\ttag.src = \"https://www.youtube.com/iframe_api\"\n\t\t\tconst firstScriptTag = document.getElementsByTagName('script')[0]\n\t\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag)\n\t\t},\n\t\tloadYoutubePlayer() {\n\n\t\t\tif (!window.YT || !window.YT.loaded) {\n\t\t\t\tconsole.log('loading youtube api')\n\t\t\t\tthis.loadYouTubeAPI()\n\t\t\t}\n\t\t\twindow.onYouTubeIframeAPIReady = () => {\n\t\t\t\tconst playerOptions = {\n\t\t\t\t\theight: '500px',\n\t\t\t\t\twidth: '500px',\n\t\t\t\t\tvideoId: this.videoId,\n\t\t\t\t\tplayerVars: {\n\t\t\t\t\t\t'controls': 1,\n\t\t\t\t\t\t'rel': 0,\n\t\t\t\t\t\t'autoplay': this.autopause ? 0 : 1\n\t\t\t\t\t},\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'onReady': this.onPlayerReady,\n\t\t\t\t\t\t'onStateChange': this.onPlayerStateChange\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.player = new YT.Player('player', playerOptions)\n\t\t\t}\n\t\t},\n\t\tonPlayerReady() {\n\t\t\tconsole.log('on player ready');\n\n\t\t},\n\t\tonStateChange() {\n\t\t\tconsole.log('on state change');\n\t\t},\n\n\t\tonPlayerStateChange(event) {\n\n\t\t\tconsole.log('state change');\n\n\t\t\tif (event.data === 0) {\n\t\t\t\tconsole.warn('Video Ended')\n\t\t\t}\n\t\t},\n\t\tonApiChange() {\n\t\t\tconsole.log('on api dogshit');\n\t\t},\n\t\tonVideoIdChange() {\n\t\t\tconsole.log('broskie');\n\t\t\tthis.player.loadVideoById(this.videoId)\n\t\t}\n\t},\n\twatch: {\n\t\tplayer() {\n\t\t\tconsole.log('player change');\n\n\t\t},\n\t\tvideoId() {\n\t\t\tconsole.log(this.videoId)\n\t\t\tthis.onVideoIdChange()\n\t\t}\n\t}\n}\n</script>\n<style scoped lang=\"scss\">\n@import 'src/styles/flex';\n\n.youtube-player {\n\t@include flex-center();\n\n\t.info {\n\t\t@include flex-column();\n\t\tcolor: white;\n\t}\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}