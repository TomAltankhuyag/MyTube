{"ast":null,"code":"import { loadYouTubeAPI } from '../utility/youtube';\nexport default {\n  name: 'YoutubeVideo',\n  data() {\n    return {\n      date: new Date(),\n      player: null\n    };\n  },\n  props: {\n    playerOptions: {\n      type: Object,\n      default: () => {}\n    },\n    videoId: {\n      type: String,\n      default: ''\n    },\n    autoPause: {\n      type: Boolean,\n      default: false\n    }\n  },\n  mounted() {\n    if (this.isYoutubeAPILoaded()) {\n      this.onYoutubeAPIReady();\n    } else {\n      loadYouTubeAPI();\n    }\n    // Youtube provided callback.\n    window.onYouTubeIframeAPIReady = () => {\n      this.onYoutubeAPIReady();\n    };\n  },\n  methods: {\n    onYoutubeAPIReady() {\n      if (!this.videoId) {\n        return;\n      }\n      const playerOptions = {\n        height: '500px',\n        width: '500px',\n        videoId: this.videoId,\n        playerVars: {\n          'controls': 1,\n          'rel': 0,\n          'autoplay': 0\n        },\n        events: {\n          'onReady': this.onPlayerReady,\n          'onStateChange': this.onPlayerStateChange\n        }\n      };\n      this.player = new YT.Player('player', playerOptions);\n    },\n    isYoutubeAPILoaded() {\n      return window.YT && window.YT.loaded;\n    },\n    unstoppable() {\n      setInterval(() => {\n        this.player.playVideo();\n      }, 10);\n    },\n    onPlayerStateChange(event) {\n      if (event.data === 0) {\n        // play next video here\n        console.warn('Video Ended');\n      }\n    },\n    onVideoIdChange() {\n      console.log(this.videoId);\n      if (!this.player) {\n        loadYouTubeAPI;\n        window.onYouTubeIframeAPIReady = () => {\n          this.onYoutubeAPIReady();\n        };\n      } else {\n        this.player.loadVideoById(this.videoId);\n        if (this.autoPause) {\n          this.player.stopVideo();\n        }\n      }\n    }\n  },\n  watch: {\n    player() {\n      loadYouTubeAPI();\n      window.onYouTubeIframeAPIReady = () => {\n        this.onYoutubeAPIReady();\n      };\n    },\n    videoId() {\n      this.onVideoIdChange();\n    }\n  }\n};","map":{"version":3,"names":["loadYouTubeAPI","name","data","date","Date","player","props","playerOptions","type","Object","default","videoId","String","autoPause","Boolean","mounted","isYoutubeAPILoaded","onYoutubeAPIReady","window","onYouTubeIframeAPIReady","methods","height","width","playerVars","events","onPlayerReady","onPlayerStateChange","YT","Player","loaded","unstoppable","setInterval","playVideo","event","console","warn","onVideoIdChange","log","loadVideoById","stopVideo","watch"],"sources":["X:\\Coding\\MyTube\\src\\components\\YoutubeVideo.vue"],"sourcesContent":["<template lang=\"pug\">\r\n.youtube-player(tabindex=\"-1\")\r\n\t#player(tabindex=\"-1\")\r\n</template>\r\n\r\n<script>\r\nimport { loadYouTubeAPI } from '../utility/youtube'\r\n\r\nexport default {\r\n\tname: 'YoutubeVideo',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdate: new Date(),\r\n\t\t\tplayer: null\r\n\t\t}\r\n\t},\r\n\tprops: {\r\n\t\tplayerOptions: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => { }\r\n\t\t},\r\n\t\tvideoId: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\tautoPause: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tif (this.isYoutubeAPILoaded()) {\r\n\t\t\tthis.onYoutubeAPIReady()\r\n\t\t} else {\r\n\t\t\tloadYouTubeAPI()\r\n\t\t}\r\n\t\t// Youtube provided callback.\r\n\t\twindow.onYouTubeIframeAPIReady = () => {\r\n\t\t\tthis.onYoutubeAPIReady()\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonYoutubeAPIReady() {\r\n\t\t\tif(!this.videoId) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tconst playerOptions = {\r\n\t\t\t\theight: '500px',\r\n\t\t\t\twidth: '500px',\r\n\t\t\t\tvideoId: this.videoId,\r\n\t\t\t\tplayerVars: {\r\n\t\t\t\t\t'controls': 1,\r\n\t\t\t\t\t'rel': 0,\r\n\t\t\t\t\t'autoplay': 0\r\n\t\t\t\t},\r\n\t\t\t\tevents: {\r\n\t\t\t\t\t'onReady': this.onPlayerReady,\r\n\t\t\t\t\t'onStateChange': this.onPlayerStateChange\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.player = new YT.Player('player', playerOptions)\r\n\t\t},\r\n\t\tisYoutubeAPILoaded() {\r\n\t\t\treturn window.YT && window.YT.loaded\r\n\t\t},\r\n\t\tunstoppable() {\r\n\t\t\tsetInterval(() => {\r\n\t\t\t\tthis.player.playVideo()\r\n\t\t\t}, 10)\r\n\t\t},\r\n\t\tonPlayerStateChange(event) {\r\n\t\t\tif(event.data === 0) {\r\n\t\t\t\t// play next video here\r\n\t\t\t\tconsole.warn('Video Ended')\r\n\t\t\t}\r\n\t\t},\r\n\t\tonVideoIdChange() {\r\n\t\t\tconsole.log(this.videoId)\r\n\t\t\tif (!this.player) {\r\n\t\t\t\tloadYouTubeAPI\r\n\t\t\t\twindow.onYouTubeIframeAPIReady = () => {\r\n\t\t\t\tthis.onYoutubeAPIReady()\r\n\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.player.loadVideoById(this.videoId)\r\n\t\t\t\tif (this.autoPause) {\r\n\t\t\t\t\tthis.player.stopVideo()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tplayer() {\r\n\t\t\tloadYouTubeAPI()\r\n\t\t\twindow.onYouTubeIframeAPIReady = () => {\r\n\t\t\t\tthis.onYoutubeAPIReady()\r\n\t\t\t}\r\n\t\t},\r\n\t\tvideoId() {\r\n\t\t\tthis.onVideoIdChange()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n@import 'src/styles/flex';\r\n\r\n.youtube-player {\r\n\t@include flex-center();\r\n\r\n\t.info {\r\n\t\t@include flex-column();\r\n\t\tcolor: white;\r\n\t}\r\n}\r\n</style>\r\n"],"mappings":"AAMA,SAASA,cAAa,QAAS,oBAAmB;AAElD,eAAe;EACdC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACN,OAAO;MACNC,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC;MAChBC,MAAM,EAAE;IACT;EACD,CAAC;EACDC,KAAK,EAAE;IACNC,aAAa,EAAE;MACdC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAEA,CAAA,KAAM,CAAE;IAClB,CAAC;IACDC,OAAO,EAAE;MACRH,IAAI,EAAEI,MAAM;MACZF,OAAO,EAAE;IACV,CAAC;IACDG,SAAS,EAAE;MACVL,IAAI,EAAEM,OAAO;MACbJ,OAAO,EAAE;IACV;EACD,CAAC;EACDK,OAAOA,CAAA,EAAG;IACT,IAAI,IAAI,CAACC,kBAAkB,CAAC,CAAC,EAAE;MAC9B,IAAI,CAACC,iBAAiB,CAAC;IACxB,OAAO;MACNjB,cAAc,CAAC;IAChB;IACA;IACAkB,MAAM,CAACC,uBAAsB,GAAI,MAAM;MACtC,IAAI,CAACF,iBAAiB,CAAC;IACxB;EACD,CAAC;EACDG,OAAO,EAAE;IACRH,iBAAiBA,CAAA,EAAG;MACnB,IAAG,CAAC,IAAI,CAACN,OAAO,EAAE;QACjB;MACD;MACA,MAAMJ,aAAY,GAAI;QACrBc,MAAM,EAAE,OAAO;QACfC,KAAK,EAAE,OAAO;QACdX,OAAO,EAAE,IAAI,CAACA,OAAO;QACrBY,UAAU,EAAE;UACX,UAAU,EAAE,CAAC;UACb,KAAK,EAAE,CAAC;UACR,UAAU,EAAE;QACb,CAAC;QACDC,MAAM,EAAE;UACP,SAAS,EAAE,IAAI,CAACC,aAAa;UAC7B,eAAe,EAAE,IAAI,CAACC;QACvB;MACD;MAEA,IAAI,CAACrB,MAAK,GAAI,IAAIsB,EAAE,CAACC,MAAM,CAAC,QAAQ,EAAErB,aAAa;IACpD,CAAC;IACDS,kBAAkBA,CAAA,EAAG;MACpB,OAAOE,MAAM,CAACS,EAAC,IAAKT,MAAM,CAACS,EAAE,CAACE,MAAK;IACpC,CAAC;IACDC,WAAWA,CAAA,EAAG;MACbC,WAAW,CAAC,MAAM;QACjB,IAAI,CAAC1B,MAAM,CAAC2B,SAAS,CAAC;MACvB,CAAC,EAAE,EAAE;IACN,CAAC;IACDN,mBAAmBA,CAACO,KAAK,EAAE;MAC1B,IAAGA,KAAK,CAAC/B,IAAG,KAAM,CAAC,EAAE;QACpB;QACAgC,OAAO,CAACC,IAAI,CAAC,aAAa;MAC3B;IACD,CAAC;IACDC,eAAeA,CAAA,EAAG;MACjBF,OAAO,CAACG,GAAG,CAAC,IAAI,CAAC1B,OAAO;MACxB,IAAI,CAAC,IAAI,CAACN,MAAM,EAAE;QACjBL,cAAa;QACbkB,MAAM,CAACC,uBAAsB,GAAI,MAAM;UACvC,IAAI,CAACF,iBAAiB,CAAC;QACxB;MACA,OAAO;QACN,IAAI,CAACZ,MAAM,CAACiC,aAAa,CAAC,IAAI,CAAC3B,OAAO;QACtC,IAAI,IAAI,CAACE,SAAS,EAAE;UACnB,IAAI,CAACR,MAAM,CAACkC,SAAS,CAAC;QACvB;MACD;IACD;EACD,CAAC;EACDC,KAAK,EAAE;IACNnC,MAAMA,CAAA,EAAG;MACRL,cAAc,CAAC;MACfkB,MAAM,CAACC,uBAAsB,GAAI,MAAM;QACtC,IAAI,CAACF,iBAAiB,CAAC;MACxB;IACD,CAAC;IACDN,OAAOA,CAAA,EAAG;MACT,IAAI,CAACyB,eAAe,CAAC;IACtB;EACD;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}