{"ast":null,"code":"import { YOUTUBE_API_CODES, MAX_PLAYLIST_ITEMS } from '../constants/constants';\nimport { YOUTUBE_API_KEY } from \"../constants/api-key\";\nexport function fetchVideoInformation(id = 'lxF31-mHLz0') {\n  return new Promise(resolve => {\n    const videoID = id;\n    const request = new XMLHttpRequest();\n    request.open('GET', 'https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&id=' + videoID + '&key=' + YOUTUBE_API_KEY, true);\n    request.onreadystatechange = () => {\n      if (request.readyState === request.DONE) {\n        const payload = onRequestReady(request);\n        resolve(payload);\n      }\n    };\n    request.send();\n  });\n}\nexport function fetchPlaylistInformation(id) {\n  return new Promise(resolve => {\n    const playlistId = id;\n    const request = new XMLHttpRequest();\n    request.open('GET', 'https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,contentDetails&playlistId=' + playlistId + '&key=' + YOUTUBE_API_KEY + '&maxResults=' + MAX_PLAYLIST_ITEMS, true);\n    request.onreadystatechange = () => {\n      if (request.readyState === request.DONE) {\n        const payload = onRequestReady(request);\n        resolve(payload);\n      }\n    };\n    request.send();\n  });\n}\nfunction onRequestReady(request) {\n  if (!request || request.status < 200 || request.status >= 500) {\n    return YOUTUBE_API_CODES.GOOGLE_ERROR;\n  } else if (request.status === 400) {\n    return YOUTUBE_API_CODES.INVALID;\n  }\n  const responseText = JSON.parse(request.responseText);\n  if (responseText.items && responseText.items.length) {\n    const payload = {\n      status: YOUTUBE_API_CODES.VALID,\n      items: responseText.items\n    };\n    return payload;\n  } else {\n    return {\n      status: YOUTUBE_API_CODES.INVALID\n    };\n  }\n}","map":{"version":3,"names":["YOUTUBE_API_CODES","MAX_PLAYLIST_ITEMS","YOUTUBE_API_KEY","fetchVideoInformation","id","Promise","resolve","videoID","request","XMLHttpRequest","open","onreadystatechange","readyState","DONE","payload","onRequestReady","send","fetchPlaylistInformation","playlistId","status","GOOGLE_ERROR","INVALID","responseText","JSON","parse","items","length","VALID"],"sources":["X:/Coding/MyTube/src/utility/youtube-video-validation.js"],"sourcesContent":["import { YOUTUBE_API_CODES, MAX_PLAYLIST_ITEMS } from '../constants/constants'\r\nimport { YOUTUBE_API_KEY } from \"../constants/api-key\"\r\n\r\nexport function fetchVideoInformation(id = 'lxF31-mHLz0') {\r\n  return new Promise((resolve) => {\r\n    const videoID = id\r\n    const request = new XMLHttpRequest()\r\n\r\n    request.open('GET', 'https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&id='\r\n                 + videoID + '&key=' + YOUTUBE_API_KEY, true)\r\n\r\n    request.onreadystatechange = () => {\r\n      if (request.readyState === request.DONE) {\r\n        const payload = onRequestReady(request)\r\n        resolve(payload)\r\n      }\r\n    }\r\n\r\n    request.send()\r\n  })\r\n}\r\n\r\nexport function fetchPlaylistInformation(id) {\r\n  return new Promise((resolve) => {\r\n    const playlistId = id\r\n    const request = new XMLHttpRequest()\r\n\r\n    request.open('GET', 'https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,contentDetails&playlistId='\r\n                  + playlistId + '&key=' + YOUTUBE_API_KEY + '&maxResults=' + MAX_PLAYLIST_ITEMS, true)\r\n\r\n    request.onreadystatechange = () => {\r\n      if (request.readyState === request.DONE) {\r\n        const payload = onRequestReady(request)\r\n        resolve(payload)\r\n      }\r\n    }\r\n\r\n    request.send()\r\n  })\r\n}\r\n\r\nfunction onRequestReady(request) {\r\n  if (!request || request.status < 200 || request.status >= 500) {\r\n    return YOUTUBE_API_CODES.GOOGLE_ERROR\r\n  }else if (request.status === 400) {\r\n    return YOUTUBE_API_CODES.INVALID\r\n  }\r\n\r\n  const responseText = JSON.parse(request.responseText)\r\n\r\n  if (responseText.items && responseText.items.length) {\r\n    const payload = {\r\n      status: YOUTUBE_API_CODES.VALID,\r\n      items: responseText.items\r\n    }\r\n    return payload\r\n  } else {\r\n    return { status: YOUTUBE_API_CODES.INVALID }\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,iBAAiB,EAAEC,kBAAkB,QAAQ,wBAAwB;AAC9E,SAASC,eAAe,QAAQ,sBAAsB;AAEtD,OAAO,SAASC,qBAAqBA,CAACC,EAAE,GAAG,aAAa,EAAE;EACxD,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;IAC9B,MAAMC,OAAO,GAAGH,EAAE;IAClB,MAAMI,OAAO,GAAG,IAAIC,cAAc,CAAC,CAAC;IAEpCD,OAAO,CAACE,IAAI,CAAC,KAAK,EAAE,yFAAyF,GAC9FH,OAAO,GAAG,OAAO,GAAGL,eAAe,EAAE,IAAI,CAAC;IAEzDM,OAAO,CAACG,kBAAkB,GAAG,MAAM;MACjC,IAAIH,OAAO,CAACI,UAAU,KAAKJ,OAAO,CAACK,IAAI,EAAE;QACvC,MAAMC,OAAO,GAAGC,cAAc,CAACP,OAAO,CAAC;QACvCF,OAAO,CAACQ,OAAO,CAAC;MAClB;IACF,CAAC;IAEDN,OAAO,CAACQ,IAAI,CAAC,CAAC;EAChB,CAAC,CAAC;AACJ;AAEA,OAAO,SAASC,wBAAwBA,CAACb,EAAE,EAAE;EAC3C,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;IAC9B,MAAMY,UAAU,GAAGd,EAAE;IACrB,MAAMI,OAAO,GAAG,IAAIC,cAAc,CAAC,CAAC;IAEpCD,OAAO,CAACE,IAAI,CAAC,KAAK,EAAE,6FAA6F,GACjGQ,UAAU,GAAG,OAAO,GAAGhB,eAAe,GAAG,cAAc,GAAGD,kBAAkB,EAAE,IAAI,CAAC;IAEnGO,OAAO,CAACG,kBAAkB,GAAG,MAAM;MACjC,IAAIH,OAAO,CAACI,UAAU,KAAKJ,OAAO,CAACK,IAAI,EAAE;QACvC,MAAMC,OAAO,GAAGC,cAAc,CAACP,OAAO,CAAC;QACvCF,OAAO,CAACQ,OAAO,CAAC;MAClB;IACF,CAAC;IAEDN,OAAO,CAACQ,IAAI,CAAC,CAAC;EAChB,CAAC,CAAC;AACJ;AAEA,SAASD,cAAcA,CAACP,OAAO,EAAE;EAC/B,IAAI,CAACA,OAAO,IAAIA,OAAO,CAACW,MAAM,GAAG,GAAG,IAAIX,OAAO,CAACW,MAAM,IAAI,GAAG,EAAE;IAC7D,OAAOnB,iBAAiB,CAACoB,YAAY;EACvC,CAAC,MAAK,IAAIZ,OAAO,CAACW,MAAM,KAAK,GAAG,EAAE;IAChC,OAAOnB,iBAAiB,CAACqB,OAAO;EAClC;EAEA,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAAChB,OAAO,CAACc,YAAY,CAAC;EAErD,IAAIA,YAAY,CAACG,KAAK,IAAIH,YAAY,CAACG,KAAK,CAACC,MAAM,EAAE;IACnD,MAAMZ,OAAO,GAAG;MACdK,MAAM,EAAEnB,iBAAiB,CAAC2B,KAAK;MAC/BF,KAAK,EAAEH,YAAY,CAACG;IACtB,CAAC;IACD,OAAOX,OAAO;EAChB,CAAC,MAAM;IACL,OAAO;MAAEK,MAAM,EAAEnB,iBAAiB,CAACqB;IAAQ,CAAC;EAC9C;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}