{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { START_SONG_INDEX } from \"../../constants/constants\";\nexport const actions = {\n  syncPlaylist(index = 0) {\n    if (this.playlists.length === 0) {\n      console.warn('no playlists ):');\n      return;\n    }\n    // Initialize both user and hidden playlist\n    this.currentPlaylist = [...this.playlists[index].playlist];\n    if (!this.currentVideo.videoId) {\n      const songIndex = getRandomInt(0, this.currentPlaylist.length);\n      this.changeVideoByIndex(songIndex);\n    }\n  },\n  changeVideoByIndex(index = START_SONG_INDEX) {\n    let video;\n    if (this.currentPlaylist.length === 0) {\n      console.warn('out of songs!');\n      return;\n    }\n    if (index < this.currentPlaylist.length) {\n      video = this.currentPlaylist[index];\n    } else {\n      video = this.currentPlaylist[0];\n    }\n    this.currentVideo = video;\n  },\n  changeCurrentVideoByVideo(video) {\n    if (!video || Object.keys(video).length === 0) {\n      console.warn('no video provided');\n    }\n    this.currentVideo = video;\n  },\n  removeVideoByVideoId(videoId) {\n    const video = this.currentPlaylist.find(video => video.videoId === videoId);\n    const index = this.currentPlaylist.indexOf(video);\n    // Index is returned as -1 if no matching video is found\n    if (index >= 0) {\n      this.currentPlaylist.splice(index, 1);\n    }\n  },\n  addVideoToEnd(video) {\n    const newVideo = {\n      ...video,\n      index: this.currentPlaylist.length\n    };\n    this.currentPlaylist.push(newVideo);\n  },\n  addVideoToFirst(video) {\n    this.currentPlaylist.unshift(video);\n  },\n  loadPlaylistWithPayload(payload) {\n    payload.items.forEach(item => {\n      const video = {};\n      video.videoId = item.contentDetails.videoId;\n      video.name = item.snippet.title;\n      this.addVideoToEnd(video);\n    });\n  }\n};\n// min - Inclusive\n// max - Exclusive\nfunction getRandomInt(min = 0, max) {\n  if (!max) {\n    console.warn('max warning');\n  }\n  return Math.floor(Math.random() * (max - min) + min);\n}","map":{"version":3,"names":["START_SONG_INDEX","actions","syncPlaylist","index","playlists","length","console","warn","currentPlaylist","playlist","currentVideo","videoId","songIndex","getRandomInt","changeVideoByIndex","video","changeCurrentVideoByVideo","Object","keys","removeVideoByVideoId","find","indexOf","splice","addVideoToEnd","newVideo","push","addVideoToFirst","unshift","loadPlaylistWithPayload","payload","items","forEach","item","contentDetails","name","snippet","title","min","max","Math","floor","random"],"sources":["X:/Coding/MyTube/src/store/playlist/actions.js"],"sourcesContent":["import { START_SONG_INDEX } from \"../../constants/constants\"\n\nexport const actions = {\n  syncPlaylist(index = 0) {\n    if (this.playlists.length === 0) {\n      console.warn('no playlists ):')\n      return\n    }\n    // Initialize both user and hidden playlist\n    this.currentPlaylist = [...this.playlists[index].playlist]\n\n    if (!this.currentVideo.videoId) {\n      const songIndex = getRandomInt(0, this.currentPlaylist.length)\n      this.changeVideoByIndex(songIndex)\n    }\n  },\n  changeVideoByIndex(index = START_SONG_INDEX) {\n    let video\n    if (this.currentPlaylist.length === 0) {\n      console.warn('out of songs!')\n      return\n    }\n    if (index < this.currentPlaylist.length) {\n      video = this.currentPlaylist[index]\n    } else {\n      video = this.currentPlaylist[0]\n    }\n    this.currentVideo = video\n  },\n  changeCurrentVideoByVideo(video) {\n    if (!video || Object.keys(video).length === 0) {\n      console.warn('no video provided')\n    }\n    this.currentVideo = video\n  },\n  removeVideoByVideoId(videoId) {\n    const video = this.currentPlaylist.find(video => video.videoId === videoId)\n    const index = this.currentPlaylist.indexOf(video)\n    // Index is returned as -1 if no matching video is found\n    if (index >= 0) {\n      this.currentPlaylist.splice(index, 1)\n    }\n  },\n  addVideoToEnd(video) {\n    const newVideo = {\n      ...video,\n      index: this.currentPlaylist.length\n    }\n    this.currentPlaylist.push(newVideo)\n  },\n  addVideoToFirst(video) {\n    this.currentPlaylist.unshift(video)\n  },\n  loadPlaylistWithPayload(payload) {\n    payload.items.forEach((item) => {\n      const video = {}\n      video.videoId = item.contentDetails.videoId\n      video.name = item.snippet.title\n      this.addVideoToEnd(video)\n    })\n  }\n}\n// min - Inclusive\n// max - Exclusive\nfunction getRandomInt(min = 0, max) {\n  if (!max) {\n    console.warn('max warning')\n  }\n  return Math.floor(Math.random() * (max - min) + min)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}